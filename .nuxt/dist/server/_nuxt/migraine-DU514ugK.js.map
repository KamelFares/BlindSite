{"version":3,"file":"migraine-DU514ugK.js","sources":["../../../../app/pages/migraine.vue"],"sourcesContent":["<template>\r\n  <section class=\"migraine\">\r\n    <header class=\"migraine__header\">\r\n      <h1 class=\"migraine__title\">Migraine Aura (zig-zag / flashing scotoma)</h1>\r\n      <p class=\"migraine__lead\">\r\n        Some migraine auras include shimmering zig-zag patterns and a blind spot.\r\n        This simulation overlays a moving aura while you try to keep focus on a\r\n        target.\r\n      </p>\r\n\r\n      <div class=\"controls\" aria-label=\"Migraine aura controls\">\r\n        <label class=\"controls__label\" for=\"intensity\">Intensity: <strong>{{ intensity }}</strong></label>\r\n        <input\r\n          id=\"intensity\"\r\n          class=\"controls__range\"\r\n          type=\"range\"\r\n          min=\"0\"\r\n          max=\"10\"\r\n          step=\"1\"\r\n          v-model.number=\"intensity\"\r\n        />\r\n      </div>\r\n    </header>\r\n\r\n    <main class=\"migraine__main\">\r\n      <section class=\"game\" aria-label=\"Keep focus tracking\">\r\n        <div class=\"game__top\" aria-live=\"polite\">\r\n          <p>Time: <strong>{{ seconds }}</strong>s | Hits: <strong>{{ hits }}</strong></p>\r\n          <p class=\"game__status\">{{ status }}</p>\r\n        </div>\r\n\r\n        <div class=\"arena\" :style=\"arenaStyle\">\r\n          <div class=\"aura\" aria-hidden=\"true\" />\r\n          <div class=\"scotoma\" aria-hidden=\"true\" />\r\n\r\n          <button\r\n            type=\"button\"\r\n            class=\"dot\"\r\n            :style=\"{ left: `${dotX}%`, top: `${dotY}%` }\"\r\n            @click=\"hit\"\r\n            aria-label=\"Moving target\"\r\n          />\r\n        </div>\r\n      </section>\r\n    </main>\r\n  </section>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, onMounted, onUnmounted, ref } from 'vue'\r\n\r\nconst intensity = ref(6)\r\nconst seconds = ref(0)\r\nconst hits = ref(0)\r\nconst status = ref('Click the moving dot.')\r\n\r\nconst dotX = ref(50)\r\nconst dotY = ref(50)\r\nconst auraAngle = ref(0)\r\n\r\nlet timer: number | null = null\r\nlet raf: number | null = null\r\n\r\nconst randomBetween = (min: number, max: number) => Math.random() * (max - min) + min\r\n\r\nconst moveDot = () => {\r\n  dotX.value = randomBetween(10, 90)\r\n  dotY.value = randomBetween(12, 88)\r\n}\r\n\r\nconst hit = () => {\r\n  hits.value++\r\n  status.value = 'Hit.'\r\n  moveDot()\r\n}\r\n\r\nconst step = () => {\r\n  auraAngle.value = (auraAngle.value + 0.6 + intensity.value * 0.18) % 360\r\n  raf = window.requestAnimationFrame(step)\r\n}\r\n\r\nconst arenaStyle = computed(() => {\r\n  const i = intensity.value\r\n  return {\r\n    '--aura-opacity': (0.06 + (i / 10) * 0.26).toFixed(3),\r\n    '--aura-rotate': `${auraAngle.value}deg`,\r\n    '--scotoma-size': `${160 + i * 18}px`,\r\n  } as Record<string, string>\r\n})\r\n\r\nonMounted(() => {\r\n  moveDot()\r\n  timer = window.setInterval(() => {\r\n    seconds.value++\r\n  }, 1000)\r\n  raf = window.requestAnimationFrame(step)\r\n\r\n  if (typeof window !== 'undefined') {\r\n    window.dispatchEvent(\r\n      new CustomEvent('blindsite:achievement', {\r\n        detail: { key: 'migraine', text: 'Aura: you opened migraine simulation.' },\r\n      })\r\n    )\r\n  }\r\n})\r\n\r\nonUnmounted(() => {\r\n  if (timer) window.clearInterval(timer)\r\n  if (raf) window.cancelAnimationFrame(raf)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.migraine {\r\n  display: grid;\r\n  gap: 2.5rem;\r\n}\r\n\r\n.migraine__header {\r\n  max-width: 52rem;\r\n  display: grid;\r\n  gap: 1rem;\r\n}\r\n\r\n.migraine__title {\r\n  font-size: clamp(2.2rem, 3.5vw, 2.8rem);\r\n}\r\n\r\n.migraine__lead {\r\n  color: #e5e7eb;\r\n  line-height: 1.6;\r\n}\r\n\r\n.controls {\r\n  display: grid;\r\n  gap: 0.35rem;\r\n  max-width: 28rem;\r\n}\r\n\r\n.controls__label {\r\n  color: #e5e7eb;\r\n}\r\n\r\n.controls__range {\r\n  width: 100%;\r\n}\r\n\r\n.game {\r\n  max-width: 62rem;\r\n}\r\n\r\n.game__top {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n  gap: 0.75rem;\r\n  color: #e5e7eb;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.arena {\r\n  position: relative;\r\n  height: min(72vh, 640px);\r\n  border-radius: 1.25rem;\r\n  border: 1px solid rgba(148, 163, 184, 0.35);\r\n  overflow: hidden;\r\n  background: radial-gradient(circle at top, rgba(2, 6, 23, 0.55), rgba(0, 0, 0, 0.95));\r\n}\r\n\r\n.dot {\r\n  position: absolute;\r\n  z-index: 3;\r\n  width: 46px;\r\n  height: 46px;\r\n  border-radius: 999px;\r\n  transform: translate(-50%, -50%);\r\n  border: 2px solid rgba(56, 189, 248, 0.9);\r\n  background: rgba(56, 189, 248, 0.18);\r\n  box-shadow: 0 0 36px rgba(56, 189, 248, 0.25);\r\n  cursor: pointer;\r\n}\r\n\r\n.aura {\r\n  position: absolute;\r\n  inset: -40%;\r\n  z-index: 1;\r\n  opacity: var(--aura-opacity);\r\n  transform: rotate(var(--aura-rotate));\r\n  background:\r\n    conic-gradient(\r\n      from 0deg,\r\n      rgba(255, 255, 255, 0) 0deg,\r\n      rgba(255, 255, 255, 0.95) 18deg,\r\n      rgba(255, 255, 255, 0) 36deg,\r\n      rgba(255, 255, 255, 0.9) 54deg,\r\n      rgba(255, 255, 255, 0) 72deg\r\n    );\r\n  filter: blur(0.5px);\r\n  mix-blend-mode: screen;\r\n  pointer-events: none;\r\n}\r\n\r\n.scotoma {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  z-index: 2;\r\n  width: var(--scotoma-size);\r\n  height: var(--scotoma-size);\r\n  transform: translate(-50%, -50%);\r\n  border-radius: 999px;\r\n  background: radial-gradient(circle, rgba(0, 0, 0, 0.92), rgba(0, 0, 0, 0) 68%);\r\n  filter: blur(10px);\r\n  pointer-events: none;\r\n}\r\n</style>\r\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderStyle"],"mappings":";;;;;;;;;;;;;;;;;;;AAmDA,UAAM,YAAY,IAAI,CAAC;AACvB,UAAM,UAAU,IAAI,CAAC;AACrB,UAAM,OAAO,IAAI,CAAC;AAClB,UAAM,SAAS,IAAI,uBAAuB;AAE1C,UAAM,OAAO,IAAI,EAAE;AACnB,UAAM,OAAO,IAAI,EAAE;AACnB,UAAM,YAAY,IAAI,CAAC;AAuBvB,UAAM,aAAa,SAAS,MAAM;AAChC,YAAM,IAAI,UAAU;AACpB,aAAO;AAAA,QACL,mBAAmB,OAAQ,IAAI,KAAM,MAAM,QAAQ,CAAC;AAAA,QACpD,iBAAiB,GAAG,UAAU,KAAK;AAAA,QACnC,kBAAkB,GAAG,MAAM,IAAI,EAAE;AAAA,MAAA;AAAA,IAErC,CAAC;;uBAvFUA,eAAAC,WAAA,EAAA,OAAM,WAAA,GAAU,MAAA,CAAA,qiBAUkD,UAAA,KAAS,gIAQ5D,UAAA,KAAS,kRAQL,QAAA,KAAO,8DAAiC,KAAA,KAAI,wEACrC,OAAA,KAAM,uDAGR,WAAA,KAAU,wLAOdC,eAAA,EAAA,MAAA,GAAA,KAAA,KAAI,aAAa,KAAA,KAAI,KAAA;;;;;;;;;;;"}