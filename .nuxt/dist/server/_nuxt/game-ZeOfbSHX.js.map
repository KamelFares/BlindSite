{"version":3,"file":"game-ZeOfbSHX.js","sources":["../../../../app/pages/game.vue"],"sourcesContent":["<template>\r\n  <section class=\"blind-touch\">\r\n    <header class=\"blind-touch__header\">\r\n      <h1 class=\"blind-touch__title\">Blind Touch â€“ Visual Mode</h1>\r\n      <p class=\"blind-touch__lead\">\r\n        This is a sound-guided grid. One hidden tile is the target. Use your\r\n        ears and simple hints to find it.\r\n      </p>\r\n      <p class=\"blind-touch__instructions\">\r\n        Click tiles to guess. <strong>Higher pitch</strong> means you are\r\n        closer. Sound pans <strong>left/right</strong> depending on the tile's\r\n        position.\r\n      </p>\r\n      <button type=\"button\" class=\"blind-touch__sound-btn\" @click=\"enableSound\">\r\n        {{ audioReady ? 'Sound enabled' : 'Enable sound' }}\r\n      </button>\r\n    </header>\r\n\r\n    <main class=\"blind-touch__main\">\r\n      <section\r\n        class=\"blind-touch__arena\"\r\n        aria-label=\"Blind Touch style grid. Click tiles and listen to the sound to find the hidden target.\"\r\n      >\r\n        <div class=\"grid\" @click=\"enableSound\">\r\n          <button\r\n            v-for=\"cell in cells\"\r\n            :key=\"cell.id\"\r\n            type=\"button\"\r\n            class=\"grid__tile\"\r\n            @mouseenter=\"onTileHover(cell)\"\r\n            @focus=\"onTileHover(cell)\"\r\n            @click.stop=\"onTileClick(cell)\"\r\n          >\r\n            <!-- Optional visual index to make it more game-like -->\r\n            <span class=\"grid__tile-label\">{{ cell.index + 1 }}</span>\r\n          </button>\r\n        </div>\r\n\r\n        <div class=\"blind-touch__hud\" aria-live=\"polite\">\r\n          <p><strong>Score:</strong> {{ score }}</p>\r\n          <p><strong>Attempts:</strong> {{ attempts }}</p>\r\n          <p class=\"blind-touch__status\">{{ statusMessage }}</p>\r\n        </div>\r\n      </section>\r\n\r\n      <section class=\"blind-touch__notes\">\r\n        <h2>Idea behind this mode</h2>\r\n        <p>\r\n          With vision, the grid is easy to scan. In a non-visual version, you\r\n          would only hear the sounds and hints, building a mental picture from\r\n          audio instead of sight.\r\n        </p>\r\n      </section>\r\n    </main>\r\n  </section>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, ref } from 'vue'\r\n\r\nconst gridSize = 4\r\n\r\ninterface Cell {\r\n  id: string\r\n  index: number\r\n  x: number\r\n  y: number\r\n}\r\n\r\nconst attempts = ref(0)\r\nconst score = ref(0)\r\nconst statusMessage = ref('Click any tile to start guessing. Listen to pitch and left/right pan.')\r\n\r\nconst targetIndex = ref(0)\r\n\r\nconst targetX = computed(() => targetIndex.value % gridSize)\r\nconst targetY = computed(() => Math.floor(targetIndex.value / gridSize))\r\n\r\nconst cells = computed<Cell[]>(() => {\r\n  const list: Cell[] = []\r\n  let index = 0\r\n  for (let y = 0; y < gridSize; y++) {\r\n    for (let x = 0; x < gridSize; x++) {\r\n      list.push({ id: `${x}-${y}`, index, x, y })\r\n      index++\r\n    }\r\n  }\r\n  return list\r\n})\r\n\r\n// --- Audio setup (Web Audio) ---\r\nconst audioCtx = ref<AudioContext | null>(null)\r\nconst audioReady = ref(false)\r\n\r\nconst enableSound = () => {\r\n  if (audioCtx.value || typeof window === 'undefined') return\r\n  audioCtx.value = new AudioContext()\r\n  audioReady.value = true\r\n}\r\n\r\nconst playTone = (panValue: number, frequency: number, duration = 0.15) => {\r\n  if (!audioCtx.value) return\r\n  const ctx = audioCtx.value\r\n\r\n  const osc = ctx.createOscillator()\r\n  const gain = ctx.createGain()\r\n  const panner = new StereoPannerNode(ctx, { pan: panValue })\r\n\r\n  osc.frequency.value = frequency\r\n  gain.gain.setValueAtTime(0.25, ctx.currentTime)\r\n  gain.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + duration)\r\n\r\n  osc.connect(gain).connect(panner).connect(ctx.destination)\r\n  osc.start()\r\n  osc.stop(ctx.currentTime + duration)\r\n}\r\n\r\n// Map a cell's x-position to stereo pan (-1 left, +1 right)\r\nconst panForCell = (cell: Cell) => {\r\n  const normalizedX = cell.x / (gridSize - 1)\r\n  return (normalizedX - 0.5) * 2 // -1..1\r\n}\r\n\r\n// Distance: lower is closer to the target\r\nconst distanceToTarget = (cell: Cell) => {\r\n  const dx = Math.abs(cell.x - targetX.value)\r\n  const dy = Math.abs(cell.y - targetY.value)\r\n  return dx + dy\r\n}\r\n\r\nconst resetRound = () => {\r\n  const total = gridSize * gridSize\r\n  targetIndex.value = Math.floor(Math.random() * total)\r\n  statusMessage.value = 'New target hidden. Listen carefully and try again.'\r\n}\r\n\r\n// Hover/focus gives a subtle hint: closer = higher pitch, pan = cell position\r\nconst onTileHover = (cell: Cell) => {\r\n  if (!audioCtx.value) return\r\n  const dist = distanceToTarget(cell)\r\n  const maxDist = (gridSize - 1) * 2\r\n  const closeness = 1 - dist / maxDist // 0..1\r\n  const baseFreq = 300\r\n  const freqRange = 500\r\n  const frequency = baseFreq + closeness * freqRange\r\n  const pan = panForCell(cell)\r\n  playTone(pan, frequency, 0.12)\r\n}\r\n\r\nconst onTileClick = (cell: Cell) => {\r\n  attempts.value++\r\n  const pan = panForCell(cell)\r\n\r\n  if (cell.index === targetIndex.value) {\r\n    score.value++\r\n    statusMessage.value = 'Correct tile! A new hidden tile has been chosen.'\r\n    playTone(pan, 900, 0.2)\r\n    resetRound()\r\n    return\r\n  }\r\n\r\n  const dx = cell.x - targetX.value\r\n  const dy = cell.y - targetY.value\r\n\r\n  let hint = 'Not this one. '\r\n  if (dx < 0) hint += 'The target is more to the right. '\r\n  if (dx > 0) hint += 'The target is more to the left. '\r\n  if (dy < 0) hint += 'The target is higher up. '\r\n  if (dy > 0) hint += 'The target is lower down. '\r\n\r\n  statusMessage.value = hint.trim()\r\n  playTone(pan, 220, 0.18)\r\n}\r\n\r\n// Initialize first target index\r\nresetRound()\r\n</script>\r\n\r\n<style scoped>\r\n.blind-touch {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2.5rem;\r\n}\r\n\r\n.blind-touch__header {\r\n  display: grid;\r\n  gap: 1rem;\r\n}\r\n\r\n.blind-touch__title {\r\n  font-size: clamp(2rem, 3vw, 2.6rem);\r\n}\r\n\r\n.blind-touch__lead,\r\n.blind-touch__instructions {\r\n  max-width: 42rem;\r\n  color: #e5e7eb;\r\n}\r\n\r\n.blind-touch__sound-btn {\r\n  align-self: flex-start;\r\n  margin-top: 0.5rem;\r\n  border-radius: 999px;\r\n  border: 1px solid rgba(148, 163, 184, 0.6);\r\n  background: rgba(17, 24, 39, 0.8);\r\n  color: #e5e7eb;\r\n  padding: 0.35rem 0.9rem;\r\n  font-size: 0.85rem;\r\n  cursor: pointer;\r\n}\r\n\r\n.blind-touch__sound-btn:hover,\r\n.blind-touch__sound-btn:focus-visible {\r\n  background: rgba(15, 23, 42, 0.95);\r\n}\r\n\r\n.blind-touch__main {\r\n  display: grid;\r\n  gap: 2.5rem;\r\n}\r\n\r\n.blind-touch__arena {\r\n  border-radius: 1rem;\r\n  border: 1px solid rgba(148, 163, 184, 0.5);\r\n  padding: 1.25rem;\r\n  background: radial-gradient(circle at top, #020617 0, #020617 40%, #000 100%);\r\n}\r\n\r\n.grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, 4.2rem);\r\n  grid-template-rows: repeat(4, 4.2rem);\r\n  gap: 0.75rem;\r\n  justify-content: center;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.grid__tile {\r\n  border-radius: 0.6rem;\r\n  border: 1px solid rgba(148, 163, 184, 0.5);\r\n  background: rgba(15, 23, 42, 0.9);\r\n  color: #e5e7eb;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n}\r\n\r\n.grid__tile:hover,\r\n.grid__tile:focus-visible {\r\n  border-color: #fbbf24;\r\n  background: rgba(30, 64, 175, 0.8);\r\n}\r\n\r\n.grid__tile-label {\r\n  opacity: 0.8;\r\n}\r\n\r\n.blind-touch__hud {\r\n  font-size: 0.95rem;\r\n  color: #e5e7eb;\r\n}\r\n\r\n.blind-touch__status {\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.blind-touch__notes {\r\n  max-width: 42rem;\r\n  color: #e5e7eb;\r\n}\r\n\r\n.blind-touch__notes h2 {\r\n  font-size: 1.3rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n</style>\r\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrInterpolate"],"mappings":";;;;;;;;;;;;;;;AA4DA,MAAM,WAAW;;;;;AASjB,UAAM,WAAW,IAAI,CAAC;AACtB,UAAM,QAAQ,IAAI,CAAC;AACnB,UAAM,gBAAgB,IAAI,uEAAuE;AAEjG,UAAM,cAAc,IAAI,CAAC;AAET,aAAS,MAAM,YAAY,QAAQ,QAAQ;AAC3C,aAAS,MAAM,KAAK,MAAM,YAAY,QAAQ,QAAQ,CAAC;AAEvE,UAAM,QAAQ,SAAiB,MAAM;AACnC,YAAM,OAAe,CAAA;AACrB,UAAI,QAAQ;AACZ,eAAS,IAAI,GAAG,IAAI,UAAU,KAAK;AACjC,iBAAS,IAAI,GAAG,IAAI,UAAU,KAAK;AACjC,eAAK,KAAK,EAAE,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,OAAO,GAAG,EAAA,CAAG;AAC1C;AAAA,QACF;AAAA,MACF;AACA,aAAO;AAAA,IACT,CAAC;AAGgB,QAAyB,IAAI;AAC9C,UAAM,aAAa,IAAI,KAAK;AAsC5B,UAAM,aAAa,MAAM;AACvB,YAAM,QAAQ,WAAW;AACzB,kBAAY,QAAQ,KAAK,MAAM,KAAK,OAAA,IAAW,KAAK;AACpD,oBAAc,QAAQ;AAAA,IACxB;AAyCA,eAAA;;uBA9KWA,eAAAC,WAAA,EAAA,OAAM,iBAAa,MAAA,CAAA,onBAanB,WAAA,QAAU,kBAAA,cAAA;AAWMC,oBAAA,MAAA,QAAR,SAAI;AASuB,cAAA,2GAAAC,eAAA,KAAK,QAAK,CAAA,CAAA,kBAAA;AAAA;wKAKhB,MAAA,KAAK,qFACF,SAAA,KAAQ,sEACP,cAAA,KAAa;;;;;;;;;;;"}