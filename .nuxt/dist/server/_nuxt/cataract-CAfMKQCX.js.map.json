{"file":"cataract-CAfMKQCX.js","mappings":";;;;;;;;;;;;;;;;;;;AAsFA,UAAM,WAAW,IAAI,CAAC;AAWtB,UAAM,QAAQ,IAAY;AAAA,MACxB,EAAE,IAAI,KAAK,OAAO,QAAQ,KAAK,WAAW,MAAM,QAAA;AAAA,MAChD,EAAE,IAAI,KAAK,OAAO,QAAQ,KAAK,aAAa,MAAM,OAAA;AAAA,MAClD,EAAE,IAAI,KAAK,OAAO,QAAQ,KAAK,gBAAgB,MAAM,QAAA;AAAA,MACrD,EAAE,IAAI,KAAK,OAAO,MAAM,KAAK,YAAY,MAAM,OAAA;AAAA,MAC/C,EAAE,IAAI,KAAK,OAAO,QAAQ,KAAK,UAAU,MAAM,OAAA;AAAA,MAC/C,EAAE,IAAI,KAAK,OAAO,QAAQ,KAAK,YAAY,MAAM,OAAA;AAAA,IAAO,CACzD;AAED,UAAM,QAAQ,IAAI,CAAC;AACnB,UAAM,WAAW,IAAI,CAAC;AACtB,UAAM,cAAc,IAAI,MAAM;AAE9B,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,MAAM,MAAM,IAAI,CAAC,MAAM,EAAE,KAAK;AAC7C,kBAAY,QAAQ,OAAO,KAAK,MAAM,KAAK,OAAA,IAAW,OAAO,MAAM,CAAC;AAAA,IACtE;AAWA,UAAM,mBAAmB,SAAS,MAAM;AAEtC,YAAM,IAAI,SAAS;AACnB,YAAM,SAAU,IAAI,KAAM;AAC1B,YAAM,WAAW,IAAK,IAAI,KAAM;AAChC,YAAM,WAAW,IAAK,IAAI,KAAM;AAChC,YAAM,aAAa,IAAK,IAAI,KAAM;AAClC,aAAO;AAAA,QACL,QAAQ,QAAQ,OAAO,QAAQ,CAAC,CAAC,gBAAgB,SAAS,QAAQ,CAAC,CAAC,cAAc,SAAS,QAAQ,CAAC,CAAC,gBAAgB,WAAW,QAAQ,CAAC,CAAC;AAAA,MAAA;AAAA,IAE9I,CAAC;AAED,UAAM,aAAa,SAAS,MAAM;AAChC,YAAM,IAAI,SAAS;AAEnB,YAAM,UAAU,OAAQ,IAAI,KAAM;AAClC,aAAO;AAAA,QACL,SAAS,QAAQ,QAAQ,CAAC;AAAA,MAAA;AAAA,IAE9B,CAAC;AAED,kBAAA;;uBAhJWA,eAAAC,WAAA,EAAA,OAAM,gBAAA,GAAe,MAAA,CAAA,mgBAUD,SAAA,KAAQ,+HASb,SAAA,KAAQ,wZAaM,YAAA,KAAW,+GAGrB,MAAA,KAAK,iEACZ,SAAA,KAAQ,gEAII,iBAAA,KAAgB,sEACP,WAAA,KAAU;AAI5BC,oBAAA,MAAA,QAAL,MAAC;8CAISC,eAAA,CAAA,SAAA,EAAE,IAAI,IAAA,MAAA,CAAA,gEAGMC,eAAA,EAAE,KAAK,mDACTA,eAAA,EAAE,GAAG;;;;;;;;;;;;;","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrRenderClass","_ssrInterpolate"],"sources":["../../../../app/pages/cataract.vue"],"sourcesContent":["<template>\r\n  <section class=\"cataract-page\">\r\n    <header class=\"cataract-page__header\">\r\n      <h1 class=\"cataract-page__title\">Cataract Simulation (Blur + Glare)</h1>\r\n      <p class=\"cataract-page__lead\">\r\n        Cataracts can cause blurred vision, reduced contrast, and strong glare\r\n        around lights. This page simulates that effect.\r\n      </p>\r\n\r\n      <div class=\"controls\" aria-label=\"Cataract controls\">\r\n        <label class=\"controls__label\" for=\"severity\">\r\n          Severity: <strong>{{ severity }}</strong>\r\n        </label>\r\n        <input\r\n          id=\"severity\"\r\n          class=\"controls__range\"\r\n          type=\"range\"\r\n          min=\"0\"\r\n          max=\"10\"\r\n          step=\"1\"\r\n          v-model.number=\"severity\"\r\n        />\r\n      </div>\r\n\r\n      <p class=\"cataract-page__note\">\r\n        This is an empathy demo, not a medical tool.\r\n      </p>\r\n    </header>\r\n\r\n    <main class=\"cataract-page__main\">\r\n      <section class=\"game\" aria-label=\"Find the sign game\">\r\n        <div class=\"game__top\" aria-live=\"polite\">\r\n          <p class=\"game__prompt\">\r\n            Task: <strong>Click the “{{ targetLabel }}”</strong> sign.\r\n          </p>\r\n          <p class=\"game__score\">\r\n            Score: <strong>{{ score }}</strong> | Mistakes:\r\n            <strong>{{ mistakes }}</strong>\r\n          </p>\r\n        </div>\r\n\r\n        <div class=\"scene\" :style=\"sceneFilterStyle\">\r\n          <div class=\"scene__glare\" :style=\"glareStyle\" aria-hidden=\"true\" />\r\n\r\n          <div class=\"signs\" aria-label=\"Signs\">\r\n            <button\r\n              v-for=\"s in signs\"\r\n              :key=\"s.id\"\r\n              type=\"button\"\r\n              class=\"sign\"\r\n              :class=\"`sign--${s.tone}`\"\r\n              @click=\"onPick(s.label)\"\r\n            >\r\n              <span class=\"sign__label\">{{ s.label }}</span>\r\n              <span class=\"sign__sub\">{{ s.sub }}</span>\r\n            </button>\r\n          </div>\r\n\r\n          <div class=\"lights\" aria-hidden=\"true\">\r\n            <div class=\"light light--a\" />\r\n            <div class=\"light light--b\" />\r\n          </div>\r\n        </div>\r\n\r\n        <p class=\"game__hint\">\r\n          Tip: Increase severity to feel how glare + blur makes even simple\r\n          reading harder.\r\n        </p>\r\n      </section>\r\n\r\n      <section class=\"info\">\r\n        <h2>What cataracts can feel like</h2>\r\n        <ul>\r\n          <li>Blurred or cloudy vision</li>\r\n          <li>Halos and glare from bright lights</li>\r\n          <li>Reduced contrast (everything looks “washed out”)</li>\r\n          <li>Harder reading, especially at night</li>\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  </section>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, ref } from 'vue'\r\n\r\nconst severity = ref(4)\r\n\r\ntype Tone = 'blue' | 'green' | 'amber' | 'gray'\r\n\r\ntype Sign = {\r\n  id: string\r\n  label: string\r\n  sub: string\r\n  tone: Tone\r\n}\r\n\r\nconst signs = ref<Sign[]>([\r\n  { id: 'a', label: 'EXIT', sub: 'Doorway', tone: 'green' },\r\n  { id: 'b', label: 'INFO', sub: 'Help desk', tone: 'blue' },\r\n  { id: 'c', label: 'STOP', sub: 'Do not enter', tone: 'amber' },\r\n  { id: 'd', label: 'WC', sub: 'Restroom', tone: 'gray' },\r\n  { id: 'e', label: 'SHOP', sub: 'Market', tone: 'blue' },\r\n  { id: 'f', label: 'LIFT', sub: 'Elevator', tone: 'gray' },\r\n])\r\n\r\nconst score = ref(0)\r\nconst mistakes = ref(0)\r\nconst targetLabel = ref('EXIT')\r\n\r\nconst pickNewTarget = () => {\r\n  const labels = signs.value.map((s) => s.label)\r\n  targetLabel.value = labels[Math.floor(Math.random() * labels.length)]\r\n}\r\n\r\nconst onPick = (label: string) => {\r\n  if (label === targetLabel.value) {\r\n    score.value++\r\n    pickNewTarget()\r\n  } else {\r\n    mistakes.value++\r\n  }\r\n}\r\n\r\nconst sceneFilterStyle = computed(() => {\r\n  // Severity 0..10\r\n  const s = severity.value\r\n  const blurPx = (s / 10) * 7 // up to ~7px blur\r\n  const contrast = 1 - (s / 10) * 0.35 // down to 0.65\r\n  const saturate = 1 - (s / 10) * 0.25 // down to 0.75\r\n  const brightness = 1 + (s / 10) * 0.08\r\n  return {\r\n    filter: `blur(${blurPx.toFixed(2)}px) contrast(${contrast.toFixed(2)}) saturate(${saturate.toFixed(2)}) brightness(${brightness.toFixed(2)})`,\r\n  }\r\n})\r\n\r\nconst glareStyle = computed(() => {\r\n  const s = severity.value\r\n  // More severity = stronger glare opacity\r\n  const opacity = 0.05 + (s / 10) * 0.22\r\n  return {\r\n    opacity: opacity.toFixed(3),\r\n  }\r\n})\r\n\r\npickNewTarget()\r\n</script>\r\n\r\n<style scoped>\r\n.cataract-page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2.5rem;\r\n}\r\n\r\n.cataract-page__header {\r\n  display: grid;\r\n  gap: 1rem;\r\n  max-width: 52rem;\r\n}\r\n\r\n.cataract-page__title {\r\n  font-size: clamp(2.2rem, 3.5vw, 2.8rem);\r\n}\r\n\r\n.cataract-page__lead,\r\n.cataract-page__note {\r\n  color: #e5e7eb;\r\n  line-height: 1.6;\r\n  max-width: 52rem;\r\n}\r\n\r\n.controls {\r\n  display: grid;\r\n  gap: 0.35rem;\r\n  max-width: 28rem;\r\n}\r\n\r\n.controls__label {\r\n  color: #e5e7eb;\r\n}\r\n\r\n.controls__range {\r\n  width: 100%;\r\n}\r\n\r\n.cataract-page__main {\r\n  display: grid;\r\n  gap: 2.5rem;\r\n}\r\n\r\n.game {\r\n  max-width: 52rem;\r\n}\r\n\r\n.game__top {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  align-items: baseline;\r\n  justify-content: space-between;\r\n  gap: 0.75rem;\r\n  margin-bottom: 0.75rem;\r\n  color: #e5e7eb;\r\n}\r\n\r\n.scene {\r\n  position: relative;\r\n  border-radius: 1rem;\r\n  border: 1px solid rgba(148, 163, 184, 0.4);\r\n  background: linear-gradient(180deg, rgba(15, 23, 42, 0.9), rgba(2, 6, 23, 0.95));\r\n  padding: 1.25rem;\r\n  overflow: hidden;\r\n}\r\n\r\n.scene__glare {\r\n  position: absolute;\r\n  inset: -20%;\r\n  background:\r\n    radial-gradient(circle at 18% 22%, rgba(255, 255, 255, 0.9), transparent 38%),\r\n    radial-gradient(circle at 72% 30%, rgba(255, 255, 255, 0.7), transparent 42%),\r\n    radial-gradient(circle at 50% 70%, rgba(255, 255, 255, 0.5), transparent 46%);\r\n  mix-blend-mode: screen;\r\n  pointer-events: none;\r\n}\r\n\r\n.signs {\r\n  position: relative;\r\n  z-index: 1;\r\n  display: grid;\r\n  grid-template-columns: repeat(3, minmax(0, 1fr));\r\n  gap: 0.85rem;\r\n}\r\n\r\n.sign {\r\n  border-radius: 1rem;\r\n  border: 1px solid rgba(148, 163, 184, 0.5);\r\n  padding: 1.15rem;\r\n  text-align: left;\r\n  cursor: pointer;\r\n  background: rgba(15, 23, 42, 0.65);\r\n  color: #e5e7eb;\r\n  transition: transform 0.12s ease, border-color 0.12s ease;\r\n}\r\n\r\n.sign:hover,\r\n.sign:focus-visible {\r\n  transform: translateY(-2px);\r\n  border-color: rgba(251, 191, 36, 0.85);\r\n  outline: none;\r\n}\r\n\r\n.sign__label {\r\n  display: block;\r\n  font-weight: 800;\r\n  letter-spacing: 0.1em;\r\n  font-size: 1.3rem;\r\n}\r\n\r\n.sign__sub {\r\n  display: block;\r\n  opacity: 0.85;\r\n  margin-top: 0.25rem;\r\n}\r\n\r\n.sign--green {\r\n  background: rgba(34, 197, 94, 0.18);\r\n}\r\n\r\n.sign--blue {\r\n  background: rgba(56, 189, 248, 0.18);\r\n}\r\n\r\n.sign--amber {\r\n  background: rgba(251, 191, 36, 0.18);\r\n}\r\n\r\n.sign--gray {\r\n  background: rgba(148, 163, 184, 0.16);\r\n}\r\n\r\n.lights {\r\n  position: absolute;\r\n  inset: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.light {\r\n  position: absolute;\r\n  width: 170px;\r\n  height: 170px;\r\n  border-radius: 999px;\r\n  background: radial-gradient(circle, rgba(255, 255, 255, 0.75), transparent 60%);\r\n  filter: blur(1px);\r\n  opacity: 0.35;\r\n}\r\n\r\n.light--a {\r\n  top: 0.75rem;\r\n  left: 0.75rem;\r\n}\r\n\r\n.light--b {\r\n  top: 1.4rem;\r\n  right: 1.2rem;\r\n}\r\n\r\n.game__hint {\r\n  color: #e5e7eb;\r\n  opacity: 0.9;\r\n  margin-top: 0.75rem;\r\n}\r\n\r\n.info {\r\n  max-width: 52rem;\r\n  color: #e5e7eb;\r\n  line-height: 1.6;\r\n}\r\n\r\n.info h2 {\r\n  font-size: 1.3rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.info ul {\r\n  padding-left: 1.25rem;\r\n  margin: 0;\r\n}\r\n\r\n.info li + li {\r\n  margin-top: 0.4rem;\r\n}\r\n\r\n@media (max-width: 720px) {\r\n  .signs {\r\n    grid-template-columns: repeat(2, minmax(0, 1fr));\r\n  }\r\n}\r\n</style>\r\n"],"version":3}