{"version":3,"file":"tunnel-DsFKu_tL.js","sources":["../../../../app/pages/tunnel.vue"],"sourcesContent":["<template>\r\n  <section class=\"tunnel\">\r\n    <header class=\"tunnel__header\">\r\n      <h1 class=\"tunnel__title\">Tunnel Vision (glaucoma / retinitis pigmentosa)</h1>\r\n      <p class=\"tunnel__lead\">\r\n        Peripheral vision can fade, leaving a narrow “tunnel”. Try to find and\r\n        click the highlighted target while your view is restricted.\r\n      </p>\r\n\r\n      <div class=\"controls\" aria-label=\"Tunnel vision controls\">\r\n        <label class=\"controls__label\" for=\"radius\">\r\n          Tunnel size: <strong>{{ radius }}</strong>\r\n        </label>\r\n        <input\r\n          id=\"radius\"\r\n          class=\"controls__range\"\r\n          type=\"range\"\r\n          min=\"70\"\r\n          max=\"260\"\r\n          step=\"10\"\r\n          v-model.number=\"radius\"\r\n        />\r\n      </div>\r\n\r\n      <p class=\"tunnel__note\">\r\n        Tip: Use your mouse to “scan”. In real life people scan with head/eye\r\n        movements to compensate.\r\n      </p>\r\n    </header>\r\n\r\n    <main class=\"tunnel__main\">\r\n      <section class=\"game\" aria-label=\"Find the glowing dot\">\r\n        <div class=\"game__top\" aria-live=\"polite\">\r\n          <p>Score: <strong>{{ score }}</strong> | Misses: <strong>{{ misses }}</strong></p>\r\n          <p class=\"game__status\">{{ status }}</p>\r\n        </div>\r\n\r\n        <div class=\"arena\" @click.self=\"miss()\" @mousemove=\"onMove\" :style=\"maskStyle\">\r\n          <div class=\"mask\" aria-hidden=\"true\" />\r\n\r\n          <button\r\n            type=\"button\"\r\n            class=\"target\"\r\n            :style=\"{ left: `${targetX}%`, top: `${targetY}%` }\"\r\n            @click.stop=\"hit\"\r\n            aria-label=\"Target\"\r\n          />\r\n\r\n          <div class=\"noise\" aria-hidden=\"true\" />\r\n        </div>\r\n      </section>\r\n    </main>\r\n  </section>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, onMounted, ref } from 'vue'\r\nimport { useLightCursor } from '~/composables/useLightCursor'\r\n\r\nconst { cssVars } = useLightCursor()\r\n\r\nconst radius = ref(170)\r\nconst score = ref(0)\r\nconst misses = ref(0)\r\nconst status = ref('Find the glowing dot. Click it.')\r\n\r\nconst targetX = ref(50)\r\nconst targetY = ref(50)\r\n\r\nconst randomBetween = (min: number, max: number) => Math.random() * (max - min) + min\r\n\r\nconst reposition = () => {\r\n  targetX.value = randomBetween(8, 92)\r\n  targetY.value = randomBetween(10, 90)\r\n}\r\n\r\nconst hit = () => {\r\n  score.value++\r\n  status.value = 'Hit. New target.'\r\n  reposition()\r\n}\r\n\r\nconst miss = () => {\r\n  misses.value++\r\n  status.value = 'Miss. Scan again.'\r\n}\r\n\r\nconst onMove = () => {\r\n  // no-op: we use global cursor vars via useLightCursor (app shell updates them)\r\n}\r\n\r\nconst maskStyle = computed(() => ({\r\n  ...cssVars.value,\r\n  '--radius': `${radius.value}px`,\r\n}))\r\n\r\nonMounted(() => {\r\n  reposition()\r\n  if (typeof window !== 'undefined') {\r\n    window.dispatchEvent(\r\n      new CustomEvent('blindsite:achievement', {\r\n        detail: { key: 'tunnel', text: 'Tunnel vision: you opened the tunnel simulation.' },\r\n      })\r\n    )\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.tunnel {\r\n  display: grid;\r\n  gap: 2.5rem;\r\n}\r\n\r\n.tunnel__header {\r\n  max-width: 52rem;\r\n  display: grid;\r\n  gap: 1rem;\r\n}\r\n\r\n.tunnel__title {\r\n  font-size: clamp(2.2rem, 3.5vw, 2.8rem);\r\n}\r\n\r\n.tunnel__lead,\r\n.tunnel__note {\r\n  color: #e5e7eb;\r\n  line-height: 1.6;\r\n}\r\n\r\n.controls {\r\n  display: grid;\r\n  gap: 0.35rem;\r\n  max-width: 28rem;\r\n}\r\n\r\n.controls__label {\r\n  color: #e5e7eb;\r\n}\r\n\r\n.controls__range {\r\n  width: 100%;\r\n}\r\n\r\n.game {\r\n  max-width: 62rem;\r\n}\r\n\r\n.game__top {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n  gap: 0.75rem;\r\n  color: #e5e7eb;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.arena {\r\n  position: relative;\r\n  height: min(72vh, 640px);\r\n  border-radius: 1.25rem;\r\n  border: 1px solid rgba(148, 163, 184, 0.35);\r\n  overflow: hidden;\r\n  background: radial-gradient(circle at top, rgba(2, 6, 23, 0.55), rgba(0, 0, 0, 0.95));\r\n}\r\n\r\n/* darkness mask: only a circular area is visible around cursor */\r\n.mask {\r\n  position: absolute;\r\n  inset: 0;\r\n  background:\r\n    radial-gradient(\r\n      circle at var(--cursor-x) var(--cursor-y),\r\n      rgba(255, 255, 255, 0.02) 0,\r\n      rgba(255, 255, 255, 0.0) 20px,\r\n      rgba(0, 0, 0, 0.98) var(--radius)\r\n    );\r\n  pointer-events: none;\r\n  z-index: 2;\r\n}\r\n\r\n.target {\r\n  position: absolute;\r\n  z-index: 1;\r\n  width: 44px;\r\n  height: 44px;\r\n  border-radius: 999px;\r\n  transform: translate(-50%, -50%);\r\n  border: 2px solid rgba(251, 191, 36, 0.85);\r\n  background: rgba(251, 191, 36, 0.18);\r\n  box-shadow:\r\n    0 0 0 2px rgba(251, 191, 36, 0.12),\r\n    0 0 30px rgba(251, 191, 36, 0.25);\r\n  cursor: pointer;\r\n}\r\n\r\n.target:hover,\r\n.target:focus-visible {\r\n  outline: none;\r\n  box-shadow:\r\n    0 0 0 3px rgba(251, 191, 36, 0.35),\r\n    0 0 44px rgba(251, 191, 36, 0.35);\r\n}\r\n\r\n.noise {\r\n  position: absolute;\r\n  inset: 0;\r\n  opacity: 0.08;\r\n  background-image:\r\n    radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.16), transparent 35%),\r\n    radial-gradient(circle at 70% 80%, rgba(255, 255, 255, 0.12), transparent 38%);\r\n  pointer-events: none;\r\n}\r\n</style>\r\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderStyle"],"mappings":";;;;;;;;;;;;;;;;;;;AA2DA,UAAM,EAAE,QAAA,IAAY,eAAA;AAEpB,UAAM,SAAS,IAAI,GAAG;AACtB,UAAM,QAAQ,IAAI,CAAC;AACnB,UAAM,SAAS,IAAI,CAAC;AACpB,UAAM,SAAS,IAAI,iCAAiC;AAEpD,UAAM,UAAU,IAAI,EAAE;AACtB,UAAM,UAAU,IAAI,EAAE;AAwBtB,UAAM,YAAY,SAAS,OAAO;AAAA,MAChC,GAAG,QAAQ;AAAA,MACX,YAAY,GAAG,OAAO,KAAK;AAAA,IAAA,EAC3B;;uBA7FSA,eAAAC,WAAA,EAAA,OAAM,SAAA,GAAQ,MAAA,CAAA,6gBAUS,OAAA,KAAM,gIASd,OAAA,KAAM,8ZAaD,MAAA,KAAK,+DAAkC,OAAA,KAAM,wEACvC,OAAA,KAAM,uDAGiC,UAAA,KAAS,6HAMtDC,eAAA,EAAA,MAAA,GAAA,QAAA,KAAO,aAAa,QAAA,KAAO,KAAA;;;;;;;;;;;"}