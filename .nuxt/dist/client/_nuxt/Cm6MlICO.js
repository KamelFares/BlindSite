import{f as E,l as D,B as I,m as N,c as _,a,d as l,t as i,z,C as U,A as V,v as C,F as H,r as L,h as r,i as w,o as b,g as P,s as W,_ as F}from"./BgeVWdcT.js";const A={class:"macular"},R={class:"macular__header"},j={class:"controls"},q={class:"controls__label",for:"difficulty"},G={class:"controls__label",for:"size"},J={class:"macular__main"},K={class:"game","aria-label":"Peripheral vision game"},O={class:"game__top","aria-live":"polite"},Q={class:"game__prompt"},X={class:"game__score"},Y=["onClick","aria-label"],Z={"aria-hidden":"true"},ee=E({__name:"macular",setup(ae){const u=r(160),x=r(0),c=r(0),v=r("▲"),M=r([]),n=r("normal"),d=r(25);let p=null;const S=w(()=>n.value==="easy"?"Easy":n.value==="hard"?"Hard":"Normal"),m=["▲","●","■","◆","✚"],k=(o,e)=>Math.random()*(e-o)+o,s=w(()=>{switch(n.value){case"easy":return{count:12,size:56,padding:18,start:30,penalty:1};case"hard":return{count:22,size:38,padding:16,start:18,penalty:2};default:return{count:16,size:48,padding:18,start:25,penalty:1}}}),T=w(()=>({"--spot-size":`${u.value}px`,"--item-size":`${s.value.size}px`})),f=()=>{if(typeof window>"u")return;const o=Math.min(900,window.innerWidth-80),e=420,t=s.value.padding,g=[];for(let y=0;y<s.value.count;y++)g.push({id:y,x:k(t,o-t),y:k(t,e-t),shape:m[Math.floor(Math.random()*m.length)]});M.value=g,v.value=m[Math.floor(Math.random()*m.length)]},h=()=>{d.value=s.value.start,p&&window.clearInterval(p),p=window.setInterval(()=>{d.value-=1,d.value<=0&&(c.value+=s.value.penalty,h(),f())},1e3)},$=o=>{o.shape===v.value?(x.value++,d.value=Math.min(s.value.start,d.value+2),f()):c.value+=s.value.penalty},B=()=>{c.value+=s.value.penalty};return D(()=>{f(),h(),typeof window<"u"&&window.dispatchEvent(new CustomEvent("blindsite:achievement",{detail:{key:"macular",text:"Central vision: you reached the macular degeneration simulation."}}))}),I(()=>{p&&window.clearInterval(p)}),N(n,()=>{n.value==="hard"&&(u.value=Math.max(u.value,190)),h(),f()}),(o,e)=>(b(),_("section",A,[a("header",R,[e[5]||(e[5]=a("h1",{class:"macular__title"},"Macular Degeneration Simulation",-1)),e[6]||(e[6]=a("p",{class:"macular__lead"}," Macular degeneration can affect central vision. People may see a blur or dark spot in the center while peripheral vision remains. ",-1)),a("div",j,[a("label",q,[e[2]||(e[2]=l(" Difficulty: ",-1)),a("strong",null,i(S.value),1)]),z(a("select",{id:"difficulty",class:"controls__select","onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t)},[...e[3]||(e[3]=[a("option",{value:"easy"},"Easy",-1),a("option",{value:"normal"},"Normal",-1),a("option",{value:"hard"},"Hard",-1)])],512),[[U,n.value]]),a("label",G,[e[4]||(e[4]=l(" Central spot size: ",-1)),a("strong",null,i(u.value),1)]),z(a("input",{id:"size",class:"controls__range",type:"range",min:"80",max:"260",step:"10","onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t)},null,512),[[V,u.value,void 0,{number:!0}]])])]),a("main",J,[a("section",K,[a("div",O,[a("p",Q,[e[7]||(e[7]=l(" Task: Click the target shape ",-1)),a("strong",null,i(v.value),1),e[8]||(e[8]=l(". ",-1))]),a("p",X,[e[9]||(e[9]=l(" Score: ",-1)),a("strong",null,i(x.value),1),e[10]||(e[10]=l(" | Misses: ",-1)),a("strong",null,i(c.value),1),e[11]||(e[11]=l(" | Time: ",-1)),a("strong",null,i(d.value),1),e[12]||(e[12]=l("s ",-1))])]),a("div",{class:"stage",onClick:B,style:C(T.value)},[e[13]||(e[13]=a("div",{class:"spot","aria-hidden":"true"},null,-1)),(b(!0),_(H,null,L(M.value,t=>(b(),_("button",{key:t.id,type:"button",class:W(["item",{"item--target":t.shape===v.value}]),style:C({left:`${t.x}px`,top:`${t.y}px`}),onClick:P(g=>$(t),["stop"]),"aria-label":`Shape ${t.shape}`},[a("span",Z,i(t.shape),1)],14,Y))),128))],4),e[14]||(e[14]=a("p",{class:"game__hint"}," Hint: The center is blocked. Use the edges of the screen to spot the shapes and move your eyes around. ",-1))]),e[15]||(e[15]=a("section",{class:"info"},[a("h2",null,"Why this is hard"),a("p",null," When central vision is affected, details in the middle can disappear. Reading, face recognition, and small targets can become difficult. People often learn to use a “preferred retinal location” by looking slightly away from what they want to see. ")],-1))])]))}}),se=F(ee,[["__scopeId","data-v-7e3ea085"]]);export{se as default};
